(()=>{"use strict";const e=new class{constructor(){this.size=null,this.stuffing=null,this.toppingsList=[],this.url="https://raw.githubusercontent.com/April14th/Hamburger_order_service/gh-pages/JSON/hamburger.json",this.jsonObj=null,this.initDefault(),this.getSize(),this.getStuffing(),this.getToppings(),this.calculateСharacteristicOfHamburger()}initDefault(){this.get(this.url).then((e=>{this.jsonObj=e,this.size=e.size[0].name,this.stuffing=e.stuffing[0].name}))}get(e){return fetch(e).then((e=>e.json()))}getSize(){document.querySelectorAll(".size").forEach((function(t){t.addEventListener("click",(function(t){for(let i of e.jsonObj.size)t.target.value==i.name&&(e.size=i.name)}))}))}getStuffing(){document.querySelectorAll(".stuffing").forEach((function(t){t.addEventListener("click",(function(t){for(let i of e.jsonObj.stuffing)t.target.value==i.name&&(e.stuffing=i.name)}))}))}calculateСharacteristicOfHamburger(){const e=document.querySelector(".calc-btn");this.calculatePrice(e),this.calculateCalories(e),this.initOrder(e)}calculatePrice(t){t.addEventListener("click",(function(){let t=e.calculatePriceOfSize(),i=e.calculatePriceOfStuffing(),n=e.calculatePriceOfToppings();e.priceOfHamburger=t+i+n}))}calculatePriceOfSize(){for(let t of e.jsonObj.size)if(e.size==t.name)return t.price}calculatePriceOfStuffing(){for(let t of e.jsonObj.stuffing)if(e.stuffing==t.name)return t.price}calculatePriceOfToppings(){let t=0;return e.toppingsList.forEach((function(i){for(let n of e.jsonObj.topping)i==n.name&&(t+=n.price)})),t}calculateCalories(t){t.addEventListener("click",(function(){let t=e.calculateCaloriesOfSize(),i=e.calculateCaloriesOfStuffing(),n=e.calculateCaloriesOfToppings();e.calorificOfHamburger=t+i+n}))}calculateCaloriesOfSize(){for(let t of e.jsonObj.size)if(e.size==t.name)return t.calorific}calculateCaloriesOfStuffing(){for(let t of e.jsonObj.stuffing)if(e.stuffing==t.name)return t.calorific}calculateCaloriesOfToppings(){let t=0;return e.toppingsList.forEach((function(i){for(let n of e.jsonObj.topping)i==n.name&&(t+=n.calorific)})),t}addTopping(t){for(let i of e.jsonObj.topping)t.target.value==i.name&&e.toppingsList.push(i.name)}removeTopping(t){for(let i of e.jsonObj.topping)if(t.target.value==i.name){let t=e.toppingsList.indexOf(i.name);e.toppingsList.splice(t,1)}}getToppings(){document.querySelectorAll(".topping").forEach((function(t){t.addEventListener("click",(function(i){t.checked?e.addTopping(i):t&&e.removeTopping(i)}))}))}renderOrder(){return`<div class="order">\n                    <h4 class="order-title">Вы заказали:</h4>\n                    <span class="order-item">Гамбургер: ${e.size}, ${e.stuffing}</span>\n                    <span class="order-item">Дополнительные добавки: ${e.toppingsList.length?e.toppingsList.join(", "):"отсутствуют"}</span>\n                    <span class="order-item">Цена: ${e.priceOfHamburger} RUB</span>\n                    <span class="order-item">Количесво каллорий: ${e.calorificOfHamburger} кКал</span>\n                </div>`}initOrder(t){t.addEventListener("click",(function(){document.getElementById("order-container").innerHTML=e.renderOrder()}))}}})();